{% extends "base.html" %}

{% block content %}

    <script>
    jQuery(document).ready(function($) {

        $("#checkAll").click(function () {

            $('input:checkbox').not(this).prop('checked', this.checked);
        })
        })
    </script>

    <div>
    {% if message %}

            <div class="thumbnail" >
            <span class="glyphicon glyphicon-info-sign"></span>
                {{ message }}
            </br>
        </div>
    {% endif %}
    </div>


    <div style="margin: 0 auto; text-align:center;">
                        <div style=" position: relative; display: inline-block; ">
                                <a href="{% url 'vista_comandes' productor.pk %}" id="etq" class="btn btn-default btn-group-xs" style="width: auto; "  id="etq" name="etq" title="Comandes rebudes" >
{#                                    <span class="glyphicon glyphicon-folder-open" style="margin: 0 auto; margin-top: 20px; width:32px; height:32px;  position: absolute">#}
{#                                    </span>#}
{#                                    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br/><br/>#}
                                    <b id="pato" name="pato" class="pato">Comandes rebudes</b>
                                 </a>
                        </div>
                        <div style=" position: relative; display: inline-block; ">
                                <a href="{% url 'vista_dates' productor.pk %}" id="etq_selected" class="btn btn-default btn-group-xs" style="width: auto; "  id="etq" name="etq" title="Properes entregues" >
{#                                    <span class="glyphicon glyphicon-calendar" style="margin: 0 auto; margin-top: 20px; width:32px; height:32px;  position: absolute">#}
{#                                    </span>#}
{#                                    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br/><br/>#}
                                    <b id="pato" name="pato" class="pato">Dates d'entrega</b>
                                 </a>
                        </div>
{#                        <div style=" position: relative; display: inline-block; ">#}
{#                                <a href="{% url 'vista_llocs' productor.pk %}" id="etq" class="btn btn-default btn-group-xs" style="width: auto; "  id="etq" name="etq" title="Llocs d'entrega" >#}
{#                                    <span class="glyphicon glyphicon-fullscreen" style="margin: 0 auto; margin-top: 20px; width:32px; height:32px;  position: absolute">#}
{#                                    </span>#}
{#                                    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br/><br/>#}
{#                                    <b id="pato" name="pato" class="pato">Llocs d'entrega</b>#}
{#                                 </a>#}
{#                        </div>#}
                        <div style=" position: relative; display: inline-block; ">
                                <a href="{% url 'vista_productes' productor.pk %}" id="etq" class="btn btn-default btn-group-xs" style="width: auto; "  id="etq" name="etq" title="Editar productes" >
{#                                    <span class="glyphicon glyphicon-pencil" style="margin: 0 auto; margin-top: 20px; width:32px; height:32px;  position: absolute">#}
{#                                    </span>#}
{#                                    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br/><br/>#}
                                    <b id="pato" name="pato" class="pato">Editar productes</b>
                                 </a>
                        </div>
                        <div style=" position: relative; display: inline-block; ">
                                <a href="{% url 'productor_update' productor.pk %}" id="etq"  class="btn btn-default btn-group-xs" style="width: auto; "  id="etq" name="etq" title="Editar productor" >
{#                                    <span class="glyphicon glyphicon-user" style="margin: 0 auto; margin-top: 20px; width:32px; height:32px;  position: absolute">#}
{#                                    </span>#}
{#                                    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br/><br/>#}
                                    <b id="pato" name="pato" class="pato">Editar productor</b>
                                 </a>
                        </div>
                        <div style=" position: relative; display: inline-block; ">
                                <a href="{% url 'vista_historial' productor.pk %}" id="etq" class="btn btn-default btn-group-xs" style="width: auto; "  id="etq" name="etq" title="Veure historial" >
{#                                    <span class="glyphicon glyphicon-book" style="margin: 0 auto; margin-top: 20px; width:32px; height:32px;  position: absolute">#}
{#                                    </span>#}
{#                                    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br/><br/>#}
                                    <b id="pato" name="pato" class="pato">Veure historial</b>
                                 </a>
                        </div>
    </div>
    <div id="dialog" title="Dia d'entrega"><p>
        Una vegada seleccionis els productes que portaràs el {{ dia.date }}, et podran fer comandes per aquest dia tots els usuaris de {{ dia.node.nom }}
    </p>
    <p>Les comandes que et facin per al dia i lloc indicats també les pots veure llistades aquí</p></div>
    <br/>
<form method="post" action="">
  {% csrf_token %}

{#  {{ form.as_p }}#}
<p><b>Productes</b> que portaràs el <b>{{ dia.date }}</b> a partir de les <b>{{ dia.franja_inici.inici }}</b> a <b>{{ dia.node }}</b>:</p>
<p> &nbsp; &nbsp;
<input type='checkbox' id='checkAll' title="Tots"> Seleccionar tot</p>
    {% for p in productes %}

        {% if p in productes_sel %}
            <p> &nbsp; &nbsp;
             <input type="checkbox" name="productes" value="{{p.pk}}" checked/><b> {{p.nom}}</b>
            </p>
        {% else %}
            <p> &nbsp; &nbsp;
             <input type="checkbox" name="productes" value= {{p.pk}} /><b> {{p.nom}}</b>
            </p>
        {% endif %}

    {% endfor %}
{#  <input type="text" id="datepicker" size="30">#}
  <input type="submit" value="Grabar">
</form>



{% if comandes %}

   <br/>    Comandes: <br/>
     <table border="1" id="myTable" class="tablesorter" style="width: 100%">
     <thead>
     <tr>
     <th>Producte</th>
     <th>Lloc d'entrega</th>
     <th>[Cant Format]</th>
     <th>Data d'entrega</th>
     <th>Franja horària</th>
     <th>Preu</th>
     <th>Client</th>
     <th>Data de comanda</th>
     </tr>
     </thead>
     <tbody>
        {% for link in comandes %}
{#            <form method="post" action="" class="vote_form">#}
{#              <li>#}

               <tr>
                        <td>[{{ link.producte.nom }}]</td>
                        <td>{{ link.lloc_entrega }}</td>
                        <td>[{{ link.cantitat }} &nbsp; {{ link.format.nom }}]</td>
                        <td>{{ link.dia_entrega.date }}</td>
                        <td>{{ link.franja_horaria}}</td>
                        <td>{{ link.preu }}€</td>
                        <td>{{ link.client.first_name }}</td>
                        <td>{{ link.data_comanda.date }}</td>
                    </tr>

{#              </li>#}
{#            </form>#}
{#            <br/>#}
        {% endfor %}
     </tbody>
       </table>
    {% endif %}
    {% if contractes %}
    <br/>
    Contractes: <br/>
     <table border="1" id="myTable2" class="tablesorter" style="width: 100%">
     <thead><tr>
     <th>Producte</th>
     <th>Lloc d'entrega</th>
     <th>[Cant Format]</th>
     <th>Data d'entrega</th>
     <th>Franja horària</th>
     <th>Preu</th>
     <th>Client</th>
{#     <th>Data de comanda</th>#}
     <th>Freqüència</th>
     </tr>
     </thead>
     <tbody>
        {% for link in contractes %}
{#            <form method="post" action="" class="vote_form">#}
{#              <li>#}

               <tr>
                        <td><a href="{% url 'contracte_detail' link.pk %}">[{{ link.producte.nom }}]</a></td>
                        <td>{{ link.lloc_entrega }}</td>
                        <td>[{{ link.cantitat }} &nbsp; {{ link.format.nom }}]</td>
                        <td><a href="{% url 'contracte_detail' link.pk %}">{{ link.prox_entrega.date }}</a></td>
                        <td>{{ link.franja_horaria}}</td>
                        <td>{{ link.preu }}€</td>
                        <td>{{ link.client.first_name }}</td>
{#                        <td>{{ link.data_comanda.date }}</td>#}
                        <td><a href="{% url 'contracte_detail' link.pk %}">{{ link.freq_txt }}</a></td>
                    </tr>

{#              </li>#}
{#            </form>#}
{#            <br/>#}
        {% endfor %}
     </tbody>
       </table>
    {% endif %}
{% endblock %}
